define(["require", "exports", "horcrux-di", "./dispatcher"], function (require, exports, horcrux_di_1, dispatcher_1) {
    function handle(type) {
        return function (target, propertyKey, descriptor) {
            //target is an Store Prototype
            if (typeof target.handle === "function") {
                target.handlerMap = target.handlerMap || {};
                target.handlerMap[type] = target.handlerMap[type] || [];
                target.handlerMap[type].push(target[propertyKey]);
            }
            else {
                var dispatcher = horcrux_di_1.get(dispatcher_1.Dispatcher);
                target.onCreated = target.onCreated || [];
                target.onCreated.push(function (self) {
                    dispatcher.register(self[propertyKey], self);
                });
            }
        };
    }
    exports.handle = handle;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZS50cyJdLCJuYW1lcyI6WyJoYW5kbGUiXSwibWFwcGluZ3MiOiI7SUFHQSxnQkFBZ0IsSUFBa0I7UUFDakNBLE1BQU1BLENBQUNBLFVBQUNBLE1BQVdBLEVBQUVBLFdBQTRCQSxFQUFFQSxVQUFlQTtZQUNqRUEsOEJBQThCQTtZQUM5QkEsRUFBRUEsQ0FBQUEsQ0FBQ0EsT0FBT0EsTUFBTUEsQ0FBQ0EsTUFBTUEsS0FBS0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3hDQSxNQUFNQSxDQUFDQSxVQUFVQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxDQUFDQTtnQkFDNUNBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO2dCQUN4REEsTUFBTUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbkRBLENBQUNBO1lBRURBLElBQUlBLENBQUNBLENBQUNBO2dCQUNMQSxJQUFJQSxVQUFVQSxHQUFHQSxnQkFBR0EsQ0FBQ0EsdUJBQVVBLENBQUNBLENBQUNBO2dCQUNqQ0EsTUFBTUEsQ0FBQ0EsU0FBU0EsR0FBR0EsTUFBTUEsQ0FBQ0EsU0FBU0EsSUFBSUEsRUFBRUEsQ0FBQ0E7Z0JBQzFDQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFBQSxJQUFJQTtvQkFDekJBLFVBQVVBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLENBQUFBO2dCQUM3Q0EsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7WUFDSEEsQ0FBQ0E7UUFDRkEsQ0FBQ0EsQ0FBQUE7SUFDRkEsQ0FBQ0E7SUFFTyxjQUFNLFVBRmI7SUFFYyIsImZpbGUiOiJoYW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXQgfSBmcm9tIFwiaG9yY3J1eC1kaVwiXHJcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tIFwiLi9kaXNwYXRjaGVyXCJcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZSh0eXBlOnN0cmluZ3xudW1iZXIpOiBNZXRob2REZWNvcmF0b3Ige1xyXG5cdHJldHVybiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcgfCBzeW1ib2wsIGRlc2NyaXB0b3I6IGFueSkgPT4ge1xyXG5cdFx0Ly90YXJnZXQgaXMgYW4gU3RvcmUgUHJvdG90eXBlXHJcblx0XHRpZih0eXBlb2YgdGFyZ2V0LmhhbmRsZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRcdHRhcmdldC5oYW5kbGVyTWFwID0gdGFyZ2V0LmhhbmRsZXJNYXAgfHwge307XHJcblx0XHRcdHRhcmdldC5oYW5kbGVyTWFwW3R5cGVdID0gdGFyZ2V0LmhhbmRsZXJNYXBbdHlwZV0gfHwgW107XHJcblx0XHRcdHRhcmdldC5oYW5kbGVyTWFwW3R5cGVdLnB1c2godGFyZ2V0W3Byb3BlcnR5S2V5XSk7XHJcblx0XHR9XHJcblx0XHQvL2V4cGVjdCB0YXJnZXQgdG8gYmUgYW4gQ3VzdG9tRWxlbWVudCBQcm90b3R5cGVcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRsZXQgZGlzcGF0Y2hlciA9IGdldChEaXNwYXRjaGVyKTtcclxuXHRcdFx0dGFyZ2V0Lm9uQ3JlYXRlZCA9IHRhcmdldC5vbkNyZWF0ZWQgfHwgW107XHJcblx0XHRcdHRhcmdldC5vbkNyZWF0ZWQucHVzaChzZWxmPT57XHJcblx0XHRcdFx0ZGlzcGF0Y2hlci5yZWdpc3RlcihzZWxmW3Byb3BlcnR5S2V5XSwgc2VsZilcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7aGFuZGxlfSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==