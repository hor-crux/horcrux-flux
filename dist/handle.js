define(["require", "exports", "horcrux-di", "./dispatcher"], function (require, exports, horcrux_di_1, dispatcher_1) {
    function handle(type) {
        return function (target, propertyKey, descriptor) {
            //target is an Store Prototype
            if (typeof target.handle === "function") {
                target.handlerMap = target.handlerMap || {};
                target.handlerMap[type] = target.handlerMap[type] || [];
                target.handlerMap[type].push(target[propertyKey]);
            }
            else {
                var dispatcher = horcrux_di_1.get(dispatcher_1.Dispatcher);
                target.onCreated = target.onCreated || [];
                target.onCreated.push(function (self) {
                    dispatcher.register(function (action) {
                        if (action.type === type)
                            self[propertyKey].call(self, action);
                    });
                });
            }
        };
    }
    exports.handle = handle;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZS50cyJdLCJuYW1lcyI6WyJoYW5kbGUiXSwibWFwcGluZ3MiOiI7SUFHQSxnQkFBZ0IsSUFBa0I7UUFDakNBLE1BQU1BLENBQUNBLFVBQUNBLE1BQVdBLEVBQUVBLFdBQTRCQSxFQUFFQSxVQUFlQTtZQUNqRUEsOEJBQThCQTtZQUM5QkEsRUFBRUEsQ0FBQUEsQ0FBQ0EsT0FBT0EsTUFBTUEsQ0FBQ0EsTUFBTUEsS0FBS0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3hDQSxNQUFNQSxDQUFDQSxVQUFVQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxDQUFDQTtnQkFDNUNBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO2dCQUN4REEsTUFBTUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbkRBLENBQUNBO1lBRURBLElBQUlBLENBQUNBLENBQUNBO2dCQUNMQSxJQUFJQSxVQUFVQSxHQUFHQSxnQkFBR0EsQ0FBQ0EsdUJBQVVBLENBQUNBLENBQUNBO2dCQUVqQ0EsTUFBTUEsQ0FBQ0EsU0FBU0EsR0FBR0EsTUFBTUEsQ0FBQ0EsU0FBU0EsSUFBSUEsRUFBRUEsQ0FBQ0E7Z0JBQzFDQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFBQSxJQUFJQTtvQkFDekJBLFVBQVVBLENBQUNBLFFBQVFBLENBQUNBLFVBQUFBLE1BQU1BO3dCQUN6QkEsRUFBRUEsQ0FBQUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsS0FBS0EsSUFBSUEsQ0FBQ0E7NEJBQ3ZCQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtvQkFDdkNBLENBQUNBLENBQUNBLENBQUFBO2dCQUNIQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNIQSxDQUFDQTtRQUNGQSxDQUFDQSxDQUFBQTtJQUNGQSxDQUFDQTtJQUVPLGNBQU0sVUFGYjtJQUVjIiwiZmlsZSI6ImhhbmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldCB9IGZyb20gXCJob3JjcnV4LWRpXCJcclxuaW1wb3J0IHsgRGlzcGF0Y2hlciB9IGZyb20gXCIuL2Rpc3BhdGNoZXJcIlxyXG5cclxuZnVuY3Rpb24gaGFuZGxlKHR5cGU6c3RyaW5nfG51bWJlcik6IE1ldGhvZERlY29yYXRvciB7XHJcblx0cmV0dXJuICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZyB8IHN5bWJvbCwgZGVzY3JpcHRvcjogYW55KSA9PiB7XHJcblx0XHQvL3RhcmdldCBpcyBhbiBTdG9yZSBQcm90b3R5cGVcclxuXHRcdGlmKHR5cGVvZiB0YXJnZXQuaGFuZGxlID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdFx0dGFyZ2V0LmhhbmRsZXJNYXAgPSB0YXJnZXQuaGFuZGxlck1hcCB8fCB7fTtcclxuXHRcdFx0dGFyZ2V0LmhhbmRsZXJNYXBbdHlwZV0gPSB0YXJnZXQuaGFuZGxlck1hcFt0eXBlXSB8fCBbXTtcclxuXHRcdFx0dGFyZ2V0LmhhbmRsZXJNYXBbdHlwZV0ucHVzaCh0YXJnZXRbcHJvcGVydHlLZXldKTtcclxuXHRcdH1cclxuXHRcdC8vZXhwZWN0IHRhcmdldCB0byBiZSBhbiBDdXN0b21FbGVtZW50IFByb3RvdHlwZVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxldCBkaXNwYXRjaGVyID0gZ2V0KERpc3BhdGNoZXIpO1xyXG5cdFx0XHRcclxuXHRcdFx0dGFyZ2V0Lm9uQ3JlYXRlZCA9IHRhcmdldC5vbkNyZWF0ZWQgfHwgW107XHJcblx0XHRcdHRhcmdldC5vbkNyZWF0ZWQucHVzaChzZWxmPT57XHJcblx0XHRcdFx0ZGlzcGF0Y2hlci5yZWdpc3RlcihhY3Rpb24gPT4ge1xyXG5cdFx0XHRcdFx0aWYoYWN0aW9uLnR5cGUgPT09IHR5cGUpXHJcblx0XHRcdFx0XHRcdHNlbGZbcHJvcGVydHlLZXldLmNhbGwoc2VsZiwgYWN0aW9uKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHtoYW5kbGV9Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9